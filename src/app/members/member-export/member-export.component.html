<div class="member-container mat-elevation-z8">
    <div class="member-loading-shade" *ngIf="isLoadingResults">
      <mat-spinner *ngIf="isLoadingResults"></mat-spinner>
    </div>
    <div class="button-row">
      <a mat-mini-fab color="primary" matTooltip="Torna al llistat" [routerLink]="['/members-list']" class="home"><mat-icon>home</mat-icon></a>
      <span class="mat-title">Genera un fitxer d'associats</span>
    </div>
    <mat-card class="member-card">
      <mat-card-content>
        <span>L'ordre en el que les dades apareixeran al fitxer serà: </span><span class="fill-bold">{{orderedFields}} </span>
        <mat-selection-list [(ngModel)]="selectedFields" name="exporter" (selectionChange)="onSelectOption($event.option)">
          <mat-list-option #allSelected (click)="toggleAllSelection()" value="all" class="fill-bold">Totes</mat-list-option>
          <br/>
          <div fxLayout="row wrap" fxLayout.xs="column">
            <ng-container *ngFor="let item of availableFields">
              <mat-list-option [value]="item" fxFlex="0 1 33.3%">
                <span>{{item}}</span>
              </mat-list-option>
            </ng-container>
          </div>
        </mat-selection-list>
      <br/>
      <span>Un cop generat, aquí sota apareixerà l'enllaç per poder-lo descarregar. En cas que no s'activi automàticament 
        pots comprovar-ne la disponibilitat fent click a la icona </span><mat-icon inline="true">sync</mat-icon>
      <mat-divider></mat-divider>
      <mat-list>
        <mat-list-item *ngFor="let link of requestedFiles">
          <mat-icon mat-list-icon class="members-list-row" (click)="onClickRefreshFile(link)">sync</mat-icon>
          <div mat-line class="fill-light">{{link}}</div>
        </mat-list-item>
      </mat-list>
      <mat-list>
        <mat-list-item *ngFor="let link of downloadableFiles" class="members-list-row" (click)="onClickDownload(link)">
          <mat-icon mat-list-icon>save</mat-icon>
          <div mat-line>{{link}}</div>
        </mat-list-item>
      </mat-list>
    </mat-card-content>
    <mat-card-actions align="end">
      <button mat-button mat-raised-button color="primary" matTooltip="Exporta" 
        type="button" (click)="onClickGenerate($event)"><mat-icon>cloud_download</mat-icon></button>
    </mat-card-actions>
    </mat-card>
</div>
